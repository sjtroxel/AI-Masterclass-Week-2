<h1>Mighty Mileage Meetup List</h1>
<button class="btn-primary add" (click)="openModal()">Create New Meetup</button>

@if (loading()) {
  <p>Loading meetups...</p>
} @else {
  @if (meetups().length === 0) {
    <p>No meetups yet. Create one to get started!</p>
  } @else {
    <div class="meetup-list">
      @for (meetup of meetups(); track meetup.id) {
        <app-meetup-card
          [meetup]="meetup"
          [currentUserId]="currentUserId"
          (edit)="openModal($event)"
          (delete)="deleteMeetup($event)"
          (viewDetails)="openDetailModal($event)"
        />
      }
    </div>
  }
}

@if (showModal()) {
  <div class="modal-backdrop" (click)="closeModal()"></div>
  <div class="modal">
    <button class="close-btn" (click)="closeModal()">X</button>
    <h2>
      @if (meetupToEdit()) {
        Edit Meetup
      } @else {
        Create New Meetup
      }
    </h2>

    <app-meetup-form></app-meetup-form>
  </div>
}

@if (showDetailModal()) {
  <div class="modal-backdrop" (click)="closeDetailModal()"></div>
  <div class="detail-modal">
    <button class="close-btn" (click)="closeDetailModal()">&times;</button>
    <app-meetup-detail [meetupId]="detailMeetupId()!" />
  </div>
}
